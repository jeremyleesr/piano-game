<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JJ's Mission: The Garage</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #222; font-family: sans-serif; }
        
        /* GARAGE MENU */
        #garage-menu {
            position: fixed; inset: 0; background: #333; color: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 1000; text-align: center;
        }
        .upload-card {
            background: #444; padding: 20px; border-radius: 15px; margin: 10px; border: 2px solid #ffcc00; width: 80%;
        }
        input[type="file"] { margin-top: 10px; color: transparent; }

        /* THE WORLD STRUCTURE */
        #game-world { display: none; width: 100vw; height: 100vh; position: relative; background: #87CEEB; }
        
        /* GROUND & ROAD (Sketches 14 & 15) */
        #ground-container {
            position: absolute; bottom: 0; width: 100%; height: 30vh;
        }
        #grass-top { height: 20%; background: #2d5a27; }
        #grey-road { height: 60%; background: #555; border-top: 4px solid #777; border-bottom: 4px solid #777; }
        #grass-bottom { height: 20%; background: #2d5a27; }

        /* PORTRAIT WALL (Sketch 15) */
        #portrait-wall {
            position: absolute; left: 10%; bottom: 25vh; width: 30vw; height: 50vh;
            background: #111; border: 10px solid #444; display: grid;
            grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(5, 1fr); gap: 2px;
        }
        .brick { background: #8B4513; border: 1px solid #5D2E0A; z-index: 10; transition: 0.3s; }
        video { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 5; }

        /* THE TRUCK */
        #truck { position: absolute; left: -200px; bottom: 5vh; font-size: 80px; transition: left 2s linear; z-index: 50; }
    </style>
</head>
<body>

<div id="garage-menu">
    <h1>JJ'S MISSION GARAGE</h1>
    <div class="upload-card">
        <h3>1. UPLOAD CAVE VIDEO</h3>
        <input type="file" id="video-input" accept="video/*">
    </div>
    <div class="upload-card">
        <h3>2. UPLOAD JJ'S PHOTO</h3>
        <input type="file" id="photo-input" accept="image/*">
    </div>
    <button style="padding: 20px 50px; font-size: 20px; background: #ffcc00; border-radius: 10px; margin-top: 20px;" onclick="startGame()">LOCK IN & START</button>
</div>

<div id="game-world">
    <div id="battlefield">
        <div id="portrait-wall">
            <video id="prize-video" loop muted playsinline></video>
            </div>
    </div>
    
    <div id="ground-container">
        <div id="grass-top"></div>
        <div id="grey-road"></div>
        <div id="grass-bottom"></div>
    </div>

    <div id="truck">ðŸš›</div>
    <button id="drive-btn" style="position:fixed; bottom: 20px; left: 50%; transform:translateX(-50%); padding: 15px; z-index: 100;" onclick="driveTruck()">DRIVE TO WALL</button>
</div>

<script>
    const wall = document.getElementById('portrait-wall');
    for(let i=0; i<15; i++) {
        let b = document.createElement('div');
        b.className = 'brick';
        b.onclick = function() { this.style.opacity = '0'; };
        wall.appendChild(b);
    }

    function startGame() {
        const videoInput = document.getElementById('video-input');
        const videoElement = document.getElementById('prize-video');

        // Link the uploaded video to the wall
        if (videoInput.files[0]) {
            const fileURL = URL.createObjectURL(videoInput.files[0]);
            videoElement.src = fileURL;
            videoElement.play();
        }

        document.getElementById('garage-menu').style.display = 'none';
        document.getElementById('game-world').style.display = 'block';
    }

    function driveTruck() {
        const truck = document.getElementById('truck');
        truck.style.left = "60%"; // Drives down the grey road
    }
</script>
</body>
</html>
