<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Piano Battle: Warehouse Edition</title>
    <style>
        :root {
            --staff-height: 18vh;
            --note-size: 4.2vh;
            --sky-blue: #87CEEB;
            --grass-green: #2d5a27;
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #1a3320; font-family: 'Courier New', monospace; }

        /* THE WORLD CONTAINER - This is what will slide */
        #game-world {
            display: flex;
            width: 200vw; /* Two screens wide: Warehouse + Battlefield */
            height: 100vh;
            transition: transform 2s ease-in-out;
        }

        /* ACT 1: THE WAREHOUSE */
        #warehouse-scene {
            width: 100vw; height: 100vh; background: white;
            position: relative; border-right: 10px solid #333;
        }

        #music-stage {
            height: 60vh; display: flex; flex-direction: column; padding-top: 2vh;
        }

        .staff-group {
            height: var(--staff-height); position: relative; margin-left: 120px;
            border-top: 3px solid black; border-bottom: 3px solid black;
            background-image: linear-gradient(black 3px, transparent 3px);
            background-size: 100% 25%;
        }
        .staff-gap { height: 8vh; }
        .clef { position: absolute; left: -80px; height: 100%; display: flex; align-items: center; font-size: 10vh; color: black; }

        #hit-zone {
            position: absolute; left: 35%; top: 0; width: 80px; height: 60vh;
            background: rgba(0, 0, 255, 0.1); border-left: 4px solid blue; border-right: 4px solid blue;
        }

        /* THE WORKBENCH */
        #workbench {
            position: absolute; left: 50%; bottom: 5vh; width: 200px; height: 100px;
            background: #5d4037; border: 4px solid #3e2723; border-radius: 5px;
            display: flex; justify-content: center; align-items: flex-end;
        }
        #bomb-counter { position: absolute; top: -30px; color: black; font-weight: bold; width: 100%; text-align: center; }
        
        /* ACT 2: THE BATTLEFIELD (Hidden to the right) */
        #battle-scene {
            width: 100vw; height: 100vh; background: var(--sky-blue);
            position: relative; display: flex; flex-direction: column; justify-content: flex-end;
        }
        #ground { width: 100%; height: 20vh; background: var(--grass-green); }
        #cannon { position: absolute; left: 10%; bottom: 15vh; font-size: 80px; transform: rotate(-20deg); }
        #target-wall { position: absolute; right: 5%; bottom: 20vh; width: 60px; height: 300px; background: #7d7d7d; border: 4px solid #444; }

        /* UI ELEMENTS */
        #ui-layer { position: fixed; bottom: 5vh; width: 100vw; display: flex; justify-content: center; pointer-events: none; }
        .game-btn { pointer-events: auto; padding: 20px 40px; font-size: 1.5rem; background: #ffcc00; border: 4px solid black; border-radius: 15px; font-weight: bold; cursor: pointer; }
        
        .note { position: absolute; width: var(--note-size); height: var(--note-size); background: black; border-radius: 50%; right: -100px; z-index: 5; }
        .stem { position: absolute; width: 3px; height: 7vh; background: black; }
        .stem-up { bottom: 50%; left: 90%; }
        .stem-down { top: 50%; right: 90%; }
        .hit { background: #00ff00 !important; }
    </style>
</head>
<body>

    <div id="game-world">
        <div id="warehouse-scene">
            <div id="music-stage">
                <div id="hit-zone"></div>
                <div class="staff-group" id="treble-staff"><div class="clef">ùÑû</div></div>
                <div class="staff-gap"></div>
                <div class="staff-group" id="bass-staff"><div class="clef">ùÑ¢</div></div>
            </div>

            <div id="workbench">
                <div id="bomb-counter">AMMO: 0</div>
                <div id="current-bomb" style="font-size: 40px; margin-bottom: 10px;">üì¶</div>
            </div>
            
            <div id="daddys-truck" style="position: absolute; left: -300px; bottom: 5vh; font-size: 100px; transition: left 2s;">üöõ</div>
        </div>

        <div id="battle-scene">
            <div id="cannon">üöÄ</div>
            <div id="target-wall"></div>
            <div id="ground"></div>
        </div>
    </div>

    <div id="ui-layer">
        <button id="start-btn" class="game-btn" onclick="startAssembly()">START BUILD</button>
        <button id="move-btn" class="game-btn" style="display:none;" onclick="deployTruck()">LOAD TRUCK</button>
    </div>

    <script>
        let ammoCount = 0;

        function startAssembly() {
            document.getElementById('start-btn').style.display = 'none';
            // Logic to spawn notes would go here
            // Every time JJ hits a note, call 'addAmmo()'
            
            // Simulating end of song after 5 seconds for visual test
            setTimeout(() => {
                document.getElementById('move-btn').style.display = 'block';
            }, 5000);
        }

        function addAmmo() {
            ammoCount++;
            document.getElementById('bomb-counter').innerText = "AMMO: " + ammoCount;
            // Add a little "pop" effect to the crate
        }

        function deployTruck() {
            const truck = document.getElementById('daddys-truck');
            const world = document.getElementById('game-world');
            
            // Truck drives to workbench
            truck.style.left = "40%";
            
            setTimeout(() => {
                // Truck drives off and takes the warehouse with it
                truck.style.left = "110%";
                world.style.transform = "translateX(-100vw)";
            }, 2000);
        }
    </script>
</body>
</html>
