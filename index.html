<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Grand Staff â€“ Geometry Locked Foundation</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #0e2f23;
    overflow: hidden;
  }

  canvas {
    display: block;
  }

  /* HIT ZONE */
  .hit-zone {
    position: absolute;
    top: 0;
    left: 48%;
    width: 6%;
    height: 38vh;
    background: rgba(186, 178, 255, 0.35); /* translucent periwinkle */
    pointer-events: none;
  }

  /* MISS OVERLAYS (concept) */
  .miss {
    position: absolute;
    top: 0;
    height: 38vh;
    width: 4%;
    background: rgba(14, 47, 35, 0.65);
    pointer-events: none;
  }
</style>
</head>

<body>
<canvas id="staff"></canvas>

<div class="hit-zone"></div>

<!-- four miss overlays -->
<div class="miss" style="left: 44%;"></div>
<div class="miss" style="left: 40%;"></div>
<div class="miss" style="left: 36%;"></div>
<div class="miss" style="left: 32%;"></div>

<script>
const canvas = document.getElementById("staff");
const ctx = canvas.getContext("2d");

function draw() {
  const w = window.innerWidth;
  const staffHeight = Math.floor(window.innerHeight * 0.38);

  canvas.width = w;
  canvas.height = staffHeight;

  ctx.clearRect(0, 0, w, staffHeight);
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0, 0, w, staffHeight);

  const totalLines = 10;
  const gapRatio = 1.8; // space between treble & bass
  const staffSpace = staffHeight / (totalLines + gapRatio + 1);

  ctx.strokeStyle = "#000";
  ctx.lineWidth = Math.max(1, staffSpace * 0.12);

  let y = staffSpace;

  // top staff (5 lines)
  for (let i = 0; i < 5; i++) {
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(w, y);
    ctx.stroke();
    y += staffSpace;
  }

  // grand staff gap
  y += staffSpace * gapRatio;

  // bottom staff (5 lines)
  for (let i = 0; i < 5; i++) {
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(w, y);
    ctx.stroke();
    y += staffSpace;
  }

  // NOTE DRAWING (notation-correct size)
  function note(xRatio, lineIndex) {
    const noteX = w * xRatio;
    const noteY = staffSpace * (lineIndex + 1);

    const noteH = staffSpace * 0.9;
    const noteW = noteH * 1.2;

    ctx.beginPath();
    ctx.ellipse(noteX, noteY, noteW / 2, noteH / 2, -0.35, 0, Math.PI * 2);
    ctx.fillStyle = "#000";
    ctx.fill();
  }

  // demo notes (one treble, one bass)
  note(0.62, 2.5);
  note(0.38, 8.2);
}

draw();
window.addEventListener("resize", draw);
</script>
</body>
</html>